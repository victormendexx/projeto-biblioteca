{% extends "amanda/base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<h2>Detalhes do Livro</h2>
<img src="{% static livro.imagem %}" alt="{{ livro.titulo }}">
<h3>{{ livro.titulo }}</h3>
<p>Autor: {{ livro.autor }}</p>
<p>Gênero: {{ livro.genero }}</p>
<p>Editora: {{ livro.editora }}</p>
<p>Ano de Publicação: {{ livro.ano_publicacao }}</p>
<p>Idioma: {{ livro.idioma }}</p>
<p>Sinopse: {{ livro.sinopse }}</p>
<p>Status: <span id="status">{{ status_info.status }}</span></p>

<button id="pegarPdfButton" onclick="mostrarLink()">Pegar Emprestado</button>

<a id="downloadPdfLink" href="{% static status_info.pdf_disponivel %}" download style="display: none" onclick="pegarLivro()">Download PDF</a>

<input type="file" id="pdfUpload" style="display: none">
<button id="devolverPdfButton" style="display: none" onclick="devolverLivro()">Devolver</button>

<script>
    function mostrarLink() {
        document.getElementById("downloadPdfLink").style.display = "block";
    }
    function pegarLivro() {
        document.getElementById("downloadPdfLink").style.display = "none";

        document.getElementById("status").innerText = "Indisponível";
        
        document.getElementById("pegarPdfButton").style.display = "none";
        
        document.getElementById("pdfUpload").style.display = "block";
        document.getElementById("devolverPdfButton").style.display = "block";
    }

    function devolverLivro() {
        document.getElementById("status").innerText = "Disponível";
        
        document.getElementById("pegarPdfButton").style.display = "block";
        
        document.getElementById("pdfUpload").style.display = "none";
        document.getElementById("devolverPdfButton").style.display = "none";
    }
</script>

{% endblock %}